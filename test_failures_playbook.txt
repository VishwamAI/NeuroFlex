# Test Failures Playbook for NeuroFlex

## 1. Specific Test Failures Encountered

### test_tokenisation.py
1. test_contractions:
   - Expected: ["I", "'m", "can", "'t", "won", "'t"]
   - Actual: ['I', "'m", 'ca', "n't", 'wo', "n't"]

2. test_special_characters:
   - Expected: ['!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+']
   - Actual: ['!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_+']

### test_tokenizer.py
No specific failures documented yet.

## 2. Underlying Causes of Failures

1. NLTK Resource Issue:
   - Error: LookupError for 'punkt_tab' resource
   - Cause: Missing NLTK data

2. Tokenization Discrepancies:
   - Cause: Possible differences in tokenization logic between expected and actual results

## 3. Steps to Reproduce Issues

1. Set up the environment:
   ```
   export PYTHONPATH=$(pwd)/src
   ```

2. Run the tests:
   ```
   pytest tests/test_tokenisation.py
   pytest tests/test_tokenizer.py
   ```

## 4. Solutions Implemented

1. NLTK Resource Issue:
   - Solution: Download the required NLTK data using `nltk.download('punkt_tab')`

2. Tokenization Discrepancies:
   - Solution: Review and update the `tokenize_text` function in the tokenisation module

## 5. Additional Notes and Observations

1. The `tokenize_text` function currently uses NLTK's `word_tokenize`:
   ```python
   def tokenize_text(text: str) -> List[str]:
       return word_tokenize(text)
   ```

2. Consider investigating alternative tokenization methods or customizing the tokenization logic to match the expected results.

3. Full test output is available at: `~/full_outputs/PYTHONPATH_pwd_src_p_1724848380.1126218.txt`

4. Remember to investigate and document any issues in `test_tokenizer.py` as well.

## Next Steps

1. Review and update the `tokenize_text` function to address the discrepancies in contractions and special character handling.
2. Run the tests again after making changes to verify if the issues are resolved.
3. Investigate and document any failures in `test_tokenizer.py`.
4. Update this playbook with any new findings or solutions implemented.
